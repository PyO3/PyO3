[alias]
xtask = "run --package xtask --"

# Faster linking in CI for doctests where lld is available
[target.'cfg(any(target_os = "windows", target_os = "linux"))']
rustflags = [
    "-Clink-arg=-fuse-ld=lld"
]

[target.'cfg(feature = "cargo-clippy")']
rustflags = [
    # TODO: remove these allows once msrv increased from 1.48
    "-Aclippy::iter_kv_map",
    "-Aclippy::needless_borrow",
    "-Aclippy::uninlined_format_args",
    # Lints to enforce in CI
    "-Dclippy::checked_conversions",
    "-Dclippy::dbg_macro",
    "-Dclippy::explicit_into_iter_loop",
    "-Dclippy::explicit_iter_loop",
    "-Dclippy::filter_map_next",
    "-Dclippy::flat_map_option",
    "-Dclippy::let_unit_value",
    "-Dclippy::manual_assert",
    "-Dclippy::manual_ok_or",
    "-Dclippy::todo",
    "-Dclippy::unnecessary_wraps",
    "-Dclippy::useless_transmute",
    "-Delided_lifetimes_in_paths",
    "-Dunused_lifetimes",
    "-Drust_2021_prelude_collisions"
]
